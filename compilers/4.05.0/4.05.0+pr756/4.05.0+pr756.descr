Asm_directives: new abstraction layer for assembly directive emission