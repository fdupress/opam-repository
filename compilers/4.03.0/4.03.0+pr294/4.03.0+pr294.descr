Do path compression, and undo it in case of unification error